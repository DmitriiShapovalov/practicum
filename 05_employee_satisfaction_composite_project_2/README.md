# Удержание кадров

[ipynb](employee_satisfaction_composite_project_2.ipynb)

## Задачи
 - построение модели для предсказания уровня удовлетворённости сотрудника;
 - построение модели для предсказания того, что сотрудник уволится из компании

## Описание работы
На основании данных, полученных от компании-заказчика, необходимо построить модели машинного обучения для получения прогнозов удовлетворенности и возможного оттока сотрудников. Почему бизнесу это важно: удовлетворённость работой напрямую влияет на отток сотрудников. А предсказание оттока — одна из важнейших задач HR-аналитиков. Внезапные увольнения несут в себе риски для компании, особенно если уходит важный сотрудник.

## Описание данных
В нашем распоряжении датасеты для первого и второго этапа работы, которые сразу разделены на тренировочную и тестовую выборки. Датасеты содержат информацию о карьерном профиле сотрудника в организации, также выделены целевые признаки для разных этапов работы - уровень удовлетворённости сотрудника и информацию о фактическом уходе из компании.

## План работы
*Исследование будет разделено на две части для достижения поочередно каждой из целей*

*Для построения модели, предсказывающей уровень удовлетворенности сотрудников, проведены следующие этапы работы:*

- чтение и предобработка полученных данных для проверки на соответствие данных описанию и выявления и исправления возможных некорректных аномальных значений
- проведение исследовательского анализа для изучения и последующей корректной подготовки входных признаков 
- проведение корреляционного анализа входных признаков и проверка их на мультиколлинеарность
- подготовка с помощью пайплайна данных для моделирования, используя сразу несколько кодировщиков и скейлеров
- обучение сразу нескольких моделей: линейной и дерева решений, подобрав к ним лучшие гиперпараметры и оценить лучшие модели метрикой SMAPE
- тезисная формулировка промежуточных выводов по результатам получения лучших моделей.

*Для построения модели, предсказываюшей увольнение сотрудников из компании, проведены следующие этапы работы:*
- чтение и предобработка полученных данных и обработка аномальных значений
- проведение исследовательского анализа, включающий:
   - составление портрета «уволившегося сотрудника»
   - проверка зависимости увольнения сотрудников от уровня удовлетворенности
- добавление прогнозных значений удовлетворенности сотрудников, полученные лучшей моделью из первого этапа исследования, в качестве входных признаков для модели на текущем этапе исследования
- подготовка с помощью пайплайна данных для моделирования, используя сразу несколько кодировщиков и скейлеров
- обучение как минимум трех моделей, подобрав к ним лучшие гиперпараметры и найти лучшую модель, оценив результат работы метрикой ROC-AUC
- тезисная формулировка промежуточных выводов по результатам получения лучшей модели.
- Формулировка итоговых выводов  и составление рекомендаций заказчику.

## Используемые метрики
*SMAPE, ROC-AUC*

## Используемые библиотеки
*pandas, numpy, sklearn, shap, matplotlib, seaborn, phik, time, requests, os*

## Выводы
Исследовательский анализ показал следующее:
 - большинство сотрудников работают в компании от 1 до 10 лет, медианная зарплату составляет 30000
- средняя оценка удовлетворенности работой составляет 0.56
- преобладающее число работников: 
   - работает в отделе продаж - 38%
   - имеет уровень квалификации junior - 48% 
   - работает со средней загрузкой 52%
   - 86% не имеют нарушений
   - 97% не получали повышения за последний год.
- анализ оттока кадров выявил, что чаще всего увольняются сотрудники с низкой загрузкой, особенно из отделов продаж и технологий, при этом их зарплаты существенно ниже оставшихся коллег.
- корреляционный анализ удовлетворенности сотрудников показал, что главный фактор оценки — это оценка руководителя (коэффициент корреляции 0.73). Большинство сотрудников имеют оценки руководителя 3-4 балла.
- *лучшей моделью для прогнозирования удовлетворенности среди остальных оказалась DecisionTreeRegressor() с итоговой метрикой SMAPE 13.9*, гиперпараметры к которой были подобраны в пайплайне при помощи автоматизированного подбора. Анализ важности признаков показал, что прогнозируемая моделью величина оценки удовлетворенности больше всего зависит от оценки непосредственного руководителя
- Портрет уволившегося сотрудника - это сотрудники с низким уровнем загруженности, преимущественно в отделе продаж и технологическом отделе с существенной разницей в уровне зарплаты между сотрудниками такой же квалификации и с увеличением в зарплате при работе на более высоком уровне загруженности не более 10000
- *лучшей моделью среди остальных для получения прогнозных значений, уволится ли сотрудник из компании, оказалась DecisionTreeClassifier(), итоговая метрика ROC-AUC на тестовом наборе составила 0.919*, гиперпараметры к которой также были подобраны в пайплайне при помощи автоматизированного подбора.
- анализ важности признаков SHAP показал, что больше всего влияют на принятие решений лучшей моделью: квалификация сотрудника, количество отработанных лет и оценка удовлетворенностью работой
- основные рекомендации оказались следующими: повышать квалификацию персонала, следить за уровнем удовлетворенности (особенно при показателях ниже 0.4) и обеспечивать достойный рост зарплат при увеличении нагрузки.